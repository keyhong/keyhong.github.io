<!DOCTYPE HTML>
<html lang="en">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="Commerce Analysis Project, Data Engineering,Data Analysis,Python Backend">
    <meta name="description" content="0. Side Project
0.1 Situation Definition
Fashion Campus 는 15~35세 사이의 젊은 층을 타겟으로 하는 e-commerce 패션 기업이다.  2016년에 설립된 이후 20">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>Commerce Analysis Project | Keyhong</title>
    <link rel="icon" type="image/png" href="/favicon.png">
    


    <!-- bg-cover style     -->



<link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.min.css">
<link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
<link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
<link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
<link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
<link rel="stylesheet" type="text/css" href="/css/matery.css">
<link rel="stylesheet" type="text/css" href="/css/my.css">
<link rel="stylesheet" type="text/css" href="/css/dark.css" media="none" onload="if(media!='all')media='all'">




    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
    <link rel="stylesheet" href="/css/post.css">




    
        <link rel="stylesheet" type="text/css" href="/css/reward.css">
    



    <script src="/libs/jquery/jquery-3.6.0.min.js"></script>

<meta name="generator" content="Hexo 7.0.0"></head>


<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span diy-happy-monkey">Keyhong</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>Home</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>Categories</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>About</span>
    </a>
    
  </li>
  
  <!-- <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="Search" style="zoom: 0.85;"></i>
    </a>
  </li> -->
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">Keyhong</div>
        <div class="logo-desc">
            
            Never really desperate, only the lost of the soul.
            
        </div>
    </div>

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			Home
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			Categories
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			About
		</a>
          
        </li>
        
        
    </ul>
</div>


        </div>

        
    </nav>

</header>

    

<div class="bg-cover pd-header post-cover" style="background-image: url('/images/logos/life-logo.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title diy-neon-red">
                        Commerce Analysis Project</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="post-cate">
                    <i class="fas fa-bookmark fa-fw icon-category"></i>
                    
                        <a href="/categories/%EB%8D%B0%EC%9D%B4%ED%84%B0-%EB%B6%84%EC%84%9D/" class="post-category">
                            데이터 분석
                        </a>
                    
                </div>
            </div>
        </div>
        <hr class="clearfix">

        
        <!-- 是否加载使用自带的 prismjs. -->
        <link rel="stylesheet" href="/libs/prism/prism.min.css">
        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <h2 id="0-Side-Project"><a href="#0-Side-Project" class="headerlink" title="0. Side Project"></a>0. Side Project</h2><hr>
<h3 id="0-1-Situation-Definition"><a href="#0-1-Situation-Definition" class="headerlink" title="0.1 Situation Definition"></a>0.1 Situation Definition</h3><hr>
<p><code>Fashion Campus</code> 는 15~35세 사이의 젊은 층을 타겟으로 하는 e-commerce 패션 기업이다.  2016년에 설립된 이후 2020년 팬데믹에도 지속적인 성장세를 보였으나, 갑작스런 매출 감세를 보였고 이에 대한 현황 분석과 대응을 위해 외부 업체에 프로젝트를 발주하였다.</p>
<p>우리는 그 프로젝트를 수주하여 문제 상황을 해결하기 위한 데이터 분석을 수행하여야 한다.</p>
<h3 id="0-2-Data-Source"><a href="#0-2-Data-Source" class="headerlink" title="0.2 Data Source"></a>0.2 Data Source</h3><hr>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.kaggle.com/datasets/latifahhukma/fashion-campus">https://www.kaggle.com/datasets/latifahhukma/fashion-campus</a></li>
</ul>
<table>
<thead>
<tr>
<th>데이터셋_순번</th>
<th>데이터셋_영문명</th>
<th>데이터셋_한글명</th>
<th>PK_컬럼명_01</th>
<th>PK_컬럼명_02</th>
<th>행_개수</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>customer</td>
<td>고객	데이터</td>
<td>custoemr_id</td>
<td>(NULL)</td>
<td>100,000</td>
</tr>
<tr>
<td>2</td>
<td>product</td>
<td>상품 데이터</td>
<td>product_id</td>
<td>(NULL)</td>
<td>44,446</td>
</tr>
<tr>
<td>3</td>
<td>transactions</td>
<td>상품 주문 트랜잭션 이력</td>
<td>booking_id</td>
<td>product_id</td>
<td>852,584</td>
</tr>
<tr>
<td>4</td>
<td>click_stream</td>
<td>클릭스트림 이력</td>
<td>event_id</td>
<td>(NULL)</td>
<td>12,833,602</td>
</tr>
</tbody></table>
<br>

<p>** 주식별자(PK, Primary Key) : 식별자(Unique Key) 중 엔터티에 하나만 존재하는 대표 식별자</p>
<h2 id="1-Dimensional-Modeling"><a href="#1-Dimensional-Modeling" class="headerlink" title="1. Dimensional Modeling"></a>1. Dimensional Modeling</h2><hr>
<h3 id="1-1-Data-EDA"><a href="#1-1-Data-EDA" class="headerlink" title="1.1 Data EDA"></a>1.1 Data EDA</h3><hr>
<p>해당 커머스 raw 데이터의 경우, transactions 데이터에는 <code>주문 건(@PK)</code>별로 JSON 컬럼의 주문 상품 리스트가 들어 있다. 한 행의 JSON을 풀어내게 되면 <code>주문 건(@PK1)</code>, <code>상품ID(@PK2)</code>로 식별자가 구성되는 데, 세분성이 낮은 레벨에서 기존에 주문 건당 집계된 <code>total_amount</code> fact가 중복이 발생된다. <br><br>더 낮은 세분성으로 통합할 수 있지만, 주문 건 레벨의 세분성이 매출 분석을 하기에는 더 사용 빈도와 쿼리 편의성이 더 높다. 또한 더 적은 데이터만으로 집계할 수 있기 때문에 쿼리 성능도 좋다. 이러한 이유로 fact 테이블의 3가지 종류로 분류했다.</p>
<hr>
<ul>
<li><p><code>Dimension Table 1 : 고객 마스터 테이블</code></p>
<ul>
<li>주식별자(@PK) : 고객ID</li>
</ul>
</li>
</ul>
<br>

<ul>
<li><p><code>Dimension Table 2 : 상품 마스터 테이블</code></p>
<ul>
<li>주식별자(@PK) : 상품ID</li>
</ul>
</li>
</ul>
<br>

<ul>
<li><p><code>Dimension Table 3 : 날짜 차원 테이블</code></p>
<ul>
<li>주식별자(@PK) : 기준일자ID</li>
</ul>
</li>
</ul>
<hr>
<ul>
<li><p><code>Fact Table 1 : 주문 테이블</code></p>
  <table>
    <tr>
      <th>Primary Key</th>
      <th>Fact Table Type</th>
      <th>Granularity</th>
      <th>Fact</th>
      <th>활용 가능 분석</th>
    </tr>
    <tr>
      <td style="text-align: center;">주문ID</td>
      <td style="text-align: center;">Transaction</td>
      <td style="text-align: center;">주문ID</td>
      <td style="text-align: center;">상품주문총금액, 배송수수료, 프로모션할인금액, 최종결제금액</td>
      <td style="text-align: center;">매출 분석, 리텐션 분석, RFM 분석</td>
    </tr>
  </table>

  <br>
</li>
<li><p>컬럼별 분석 방법 및 BI 차트 유형</p>
  <table>
    <tr>
      <th>분류명@PK</th>
      <th>분석명@PK</th>
      <th>집계 주기</th>
      <th>집계 컬럼명</th>
      <th>집계 함수 유형명</th>
      <th>분석 목적명</th>
      <th>차트 유형명</th>
    </tr>
    <tr>
      <td style="text-align: center;">매출 분석</td>
      <td style="text-align: center;">재구매 주기<br>분석</td>
      <td style="text-align: center;">연월</td>
      <td style="text-align: center;">고객ID, 주문일자</td>
      <td style="text-align: center;">RAG, AVG, COUNT</td>
      <td style="text-align: center;">PMF 확인</td>
      <td style="text-align: center;">라인 차트</td>
    </tr>  
    <tr>
      <td style="text-align: center;">매출 분석</td>
      <td style="text-align: center;">구매건수 분석</td>
      <td style="text-align: center;">연월</td>
      <td style="text-align: center;">주문ID</td>
      <td style="text-align: center;">COUNT</td>
      <td style="text-align: center;">PMF 확인</td>
      <td style="text-align: center;">라인 차트</td>
    </tr>
    <tr>
      <td style="text-align: center;">매출 분석</td>
      <td style="text-align: center;">매출액 분석</td>
      <td style="text-align: center;">연월</td>
      <td style="text-align: center;">상품주문총금액</td>
      <td style="text-align: center;">SUM</td>
      <td style="text-align: center;">PMF 확인</td>
      <td style="text-align: center;">라인 차트</td>
    </tr>
    <tr>
      <td style="text-align: center;">매출 분석</td>
      <td style="text-align: center;">AOV 분석</td>
      <td style="text-align: center;">연월</td>
      <td style="text-align: center;">상품주문총금액, 주문ID</ 구매유저수</td>
      <td style="text-align: center;">SUM, COUNT</td>
      <td style="text-align: center;">PMF 확인</td>
      <td style="text-align: center;">라인 차트</td>
    </tr>
    <tr>
      <td style="text-align: center;">매출 분석</td>
      <td style="text-align: center;">ARPPU 분석</td>
      <td style="text-align: center;">연월</td>
      <td style="text-align: center;">상품주문총금액, 고객ID</td>
      <td style="text-align: center;">SUM, COUNT</td>
      <td style="text-align: center;">PMF 확인</td>
      <td style="text-align: center;">라인 차트</td>
    </tr>        
    <tr>
      <td style="text-align: center;">매출 분석</td>
      <td style="text-align: center;">퍼널분석<br>(가입 -> 구매)</td>
      <td style="text-align: center;">가입연월</td>
      <td style="text-align: center;">고객ID</td>
      <td style="text-align: center;">AVG</td>
      <td style="text-align: center;">PMF 확인</td>
      <td style="text-align: center;">라인 차트</td>
    </tr>
    <tr>
      <td style="text-align: center;">매출 분석</td>
      <td style="text-align: center;">User Movement</td>
      <td style="text-align: center;">연월</td>
      <td style="text-align: center;">고객ID</td>
      <td style="text-align: center;">SUM</td>
      <td style="text-align: center;">PMF 확인</td>
      <td style="text-align: center;">로컬 차트</td>
    </tr>
    <tr>
      <td style="text-align: center;">문제원인<br>분석</td>
      <td style="text-align: center;">구매 리텐션<br>분석</td>
      <td style="text-align: center;">연월</td>
      <td style="text-align: center;">고객ID</td>
      <td style="text-align: center;">SUM, COUNT</td>
      <td style="text-align: center;">PMF 확인</td>
      <td style="text-align: center;">코호트 차트</td>
    </tr>
    <tr>
      <td style="text-align: center;">문제원인<br>분석</td>
      <td style="text-align: center;">RFM 분석</td>
      <td style="text-align: center;">연월</td>
      <td style="text-align: center;">고객ID, 일자ID, 상품주문총금액</td>
      <td style="text-align: center;">SUM, MAX, COUNT, PERCENTILE</td>
      <td style="text-align: center;">고객등급<br>분류</td>
      <td style="text-align: center;">트리 차트</td>
    </tr>
  </table></li>
</ul>
<br>

<hr>
<ul>
<li><p><code>Fact Table 2 : 주문상품 테이블</code></p>
  <table>
    <tr>
      <th>Primary Key</th>
      <th>Fact Table Type</th>
      <th>Granularity</th>
      <th>Fact</th>
      <th>활용 가능 분석</th>
    </tr>
    <tr>
      <td style="text-align: center;">주문ID, 상품ID</td>
      <td style="text-align: center;">Transaction</td>
      <td style="text-align: center;">주문ID-상품ID</td>
      <td style="text-align: center;">상품수량, 상품단가, 상품주문금액</td>
      <td style="text-align: center;">세그먼트/코호트별 인기 구매상품 카테고리 분석</td>
    </tr>
  </table>
  
  <br>
</li>
<li><p>컬럼별 분석 방법 및 BI 차트 유형</p>
  <table>
    <tr>
      <th>분류명@PK</th>
      <th>분석명@PK</th>
      <th>집계 주기</th>
      <th>집계 컬럼명</th>
      <th>집계 함수 유형명</th>
      <th>분석 목적명</th>
      <th>차트 유형명</th>
    </tr>
    <tr>
      <td style="text-align: center;">세그먼트 분석</td>
      <td style="text-align: center;">인기 구매상품 카테고리 분석</td>
      <td style="text-align: center;">연월, 분기</td>
      <td style="text-align: center;">상품유형 대/중/소 분류명</td>
      <td style="text-align: center;">SUM</td>
      <td style="text-align: center;">군집별 관심상품 분석</td>
      <td style="text-align: center;">생키차트, 도넛 차트</td>
    </tr>
  </table>
  <br></li>
</ul>
<hr>
<ul>
<li><p><code>Fact Table 3 : 이벤트로그 테이블</code></p>
  <table>
    <tr>
      <th>Primary Key</th>
      <th>Fact Table Type</th>
      <th>Granularity</th>
      <th>Fact</th>
      <th>활용 가능 분석</th>
    </tr>
    <tr>
      <td style="text-align: center;">이벤트로그ID</td>
      <td style="text-align: center;">Factless</td>
      <td style="text-align: center;">이벤트로그일시</td>
      <td style="text-align: center;">이벤트로그명</td>
      <td style="text-align: center;">퍼널 분석, 연관성 분석</td>
    </tr>
  </table>      


<blockquote>
<p>데이터 탐색 (EDA)<hr>이벤트 로그 데이터의 활용성은 낮다고 판단된다. <br><br>첫 번째 이유는 UTM 파라미터가 없어 Acquisition에 대한 소스(Source)나 매치(Medium), 그리고 Organic&#x2F;Non-Organic에 대한 트랙킹이 어렵다. 또한 세션 별로 customer_id를 매핑했을 때, customer_id가 결합된(즉, NULL이 아닌) 이벤트 로그 행의 비율이 전체 행 대비 95 %에 달했다. 이는 Kaggle에서 제공하는 이벤트 로그 데이터의 대부분이 구매한 고객에 대한 데이터로만 추출되었을 가능성이 크다는 것을 의미한다. 이러한 이유로 ARPU와 ARPPU를 계산하여 전체 활성 유저의 매출과 결제 유저(PU)당 매출을 비교하고자 했지만, 이 지표가 신뢰할 수 없을 것으로 판단되었다. 일반적으로 커머스에서 기대되는 AU와 PU의 비율 차이에 비해 그 값이 상당히 미미할 것으로 예상되며, 활성 유저의 샘플링 데이터로 매출 기여에 대한 모수가 아니라는 문제도 있다. <br><br>두 번째 이유는 세션 타임에 대한 정의가 불명확하다는 점이다. 데이터 분석 결과, 동일 세션에서 24시간을 초과하는 경우가 발견되었다. 세션별 로그의 일시를 기준으로 오름차순으로 순번을 매겼을 때, BOOKING(주문) 이벤트가 바로 발생하는 사례도 있었으며, 이는 퍼널 정의에 있어 해당 데이터를 분석하는 데 어려움이 있었다.<br><br>** 이벤트로그명 : SCROLL, HOMEPAGE, CLICK, ITEM_DETAIL, ADD_TO_CART, PROMO_PAGE, ADD_PROMO, SEARCH, BOOKING</p>
</blockquote>
</li>
</ul>
<br>



<h3 id="1-2-Logical-Modeling"><a href="#1-2-Logical-Modeling" class="headerlink" title="1.2 Logical Modeling"></a>1.2 Logical Modeling</h3><hr>
<img src="https://1drv.ms/i/s!AiIJqnZ0rDMRgeQcuB-yeTFG9h-ccQ?embed=1&width=938&height=1240" width="938" height="1240" alt="Data Mart Logical Modeling (단기 프로젝트이므로, 마스터 테이블의 이력 컬럼 미 생성)"/>

<h3 id="1-3-Subject-Area"><a href="#1-3-Subject-Area" class="headerlink" title="1.3 Subject Area"></a>1.3 Subject Area</h3><hr>
<p>주제영역을 관리 측면을 고려해 3가지로 분류했다.</p>
<ul>
<li><p><code>CMN (COMMON)</code> : 전사에서 공통적으로 이용하는 Conformed Dimension 또는 Fact가 존재하는 주제영역</p>
</li>
<li><p><code>META</code> : 공통코드 테이블, 데이터 거버넌스(DQ, 메타데이터) 등이 관리되는 주제영역</p>
</li>
<li><p><code>DM</code> : Commerce 비즈니스와 관련된 마트 주제영역 (보다 구체화된 주제영역 네이밍 필요)</p>
</li>
</ul>
<p>** 주문은 비즈니스의 핵심이 되는 업무이지만, 언제든 다른 서비스의 추가 확장 가능성이 있을 수 있다고 생각되어 DM로 세분화하여 분류하였다.</p>
<h2 id="2-현황-분석"><a href="#2-현황-분석" class="headerlink" title="2. 현황 분석"></a>2. 현황 분석</h2><hr>
<blockquote>
<p>당사는 창사 이래로, <code>지속적인 고객 유치와 높은 리텐션을 기반으로 성장</code>해왔다. 하지만, 2022년 6월, 7월 연속적인 매출 하락과 <code>7월 기존 고객들의 큰 이탈이 발생</code>했다.<br><br> 이는 향후 추세에 있어 <code>지속적인 매출 하락의 가능성이 높아 보이므로, 떠나간 고객에 대한 보상 이벤트가 필요</code>하다.</p>
</blockquote>
<h3 id="2-1-성장성-분석"><a href="#2-1-성장성-분석" class="headerlink" title="2.1 성장성 분석"></a>2.1 성장성 분석</h3><hr>
<p>(1) 당사는 2016년 이래로, <code>매월 400~1,600명의 신규 고객 확보를 지속</code>해왔다.</p>
<img src="https://1drv.ms/i/s!AiIJqnZ0rDMRgeQrhmaPV-jgdWmOGQ?embed=1&width=1306&height=532" width="1306" height="532" alt="매월 신규고객 유치 현황 (2018.01 ~ 2022.07 부분)"/>

<p><em><strong>BI Tool : Tableau</strong></em></p>
<br>

<p>(2) 당사는 <code>약 2달이라는 짧은 재구매주기</code>를 가지고 있다. 18년 7월(창사 2년이 되는 시점)부터 재구매 주기(일 단위)는 약 2달 (50일 ~ 58일) 사이로 업계 평균 대비 짧은 일수를 유지하고 있다. </p>
<img src="https://1drv.ms/i/s!AiIJqnZ0rDMRgeQsGhxkOlViNiM3Hg?embed=1&width=830&height=678" width="830" height="678" alt="매 기준년월 고객 재구매주기 평균의 전체 중앙값 스냅샷 추이"/>

<ul>
<li>pyspark source code : <a target="_blank" rel="noopener" href="https://github.com/keyhong/pyspark-preprocessing/blob/main/da-analysis-jupyter/snap_monthly_user_repurchase_cycle.ipynb">https://github.com/keyhong/pyspark-preprocessing/blob/main/da-analysis-jupyter/snap_monthly_user_repurchase_cycle.ipynb</a></li>
</ul>
<br>

<p>(3) <code>당사는 약 45 %의 높은 리텐션을 기반으로 성장</code>을 이끌어 왔다. 2021년 8월에 유입된 신규 고객들의 리텐션은 변동이 있으나, 30 ~ 50 %의 리텐션을 지니고 있다.</p>
<img src="https://1drv.ms/i/s!AiIJqnZ0rDMRgeQts0lGYkqumWi98w?embed=1&width=1308&height=498" width="1308" height="498" alt="신규 고객 구매 리텐션 (2021.08 ~ 2022.07 부분)"/>

<p>** 활성화(Activation) 기준은 e-commerce 도메인에서 중요한 <code>구매</code>로 정의</p>
<h3 id="2-2-문제-정의"><a href="#2-2-문제-정의" class="headerlink" title="2.2 문제 정의"></a>2.2 문제 정의</h3><hr>
<p>(1) <code>22년 5월 기준대비 6월, 7월에 연속된 매출액 감소 (15 %), 주문건수 감소 (16 %)가 발생</code>했다.</p>
<img src="https://1drv.ms/i/s!AiIJqnZ0rDMRgeQw9Osmn_pnlkXbUw?embed=1&width=1020&height=580" width="1020" height="580" alt="[22년 7월] 2개월 연속 5월 대비 매출액 감소 : 15.76 % 감소 "/>

<ul>
<li>매출액 추이</li>
</ul>
<table>
<thead>
<tr>
<th>기준년월</th>
<th>비교년월</th>
<th>기준년월 매출액</th>
<th>비교년월 매출액</th>
<th>매출액 증감율</th>
</tr>
</thead>
<tbody><tr>
<td>21년 7월</td>
<td>22년 7월</td>
<td>11,348,000,977</td>
<td>13,109,632,628</td>
<td>+ 15.52 %</td>
</tr>
<tr>
<td>22년 5월</td>
<td>22년 7월</td>
<td>15,561,401,244</td>
<td>13,109,632,628</td>
<td>- 15.76 %</td>
</tr>
<tr>
<td>22년 6월</td>
<td>22년 7월</td>
<td>14,846,052,948</td>
<td>13,109,632,628</td>
<td>- 11.7 %</td>
</tr>
</tbody></table>
<p><br><br></p>
<img src="https://1drv.ms/i/s!AiIJqnZ0rDMRgeQvrDkKrbnls5ZYlg?embed=1&width=1016&height=572" width="1016" height="572" alt="[22년 7월] 2개월 연속 주문건수 감소 :  16.35 % 감소"/>

<ul>
<li>주문건수 추이</li>
</ul>
<table>
<thead>
<tr>
<th>기준년월</th>
<th>비교년월</th>
<th>기준년월 주문건수</th>
<th>비교년월 주문건수</th>
<th>주문건수 증감율</th>
</tr>
</thead>
<tbody><tr>
<td>21년 7월</td>
<td>22년 7월</td>
<td>21,211</td>
<td>24,090</td>
<td>+ 13.57 %</td>
</tr>
<tr>
<td>22년 5월</td>
<td>22년 7월</td>
<td>28,799</td>
<td>24,090</td>
<td>- 16.35 %</td>
</tr>
<tr>
<td>22년 6월</td>
<td>22년 7월</td>
<td>27,385</td>
<td>24,090</td>
<td>- 12.03 %</td>
</tr>
</tbody></table>
<p><br><br></p>
<p>(2) 특히, <code>22년 7월에 발생한 고객 이탈은 6월 대비 41.07 %로 기존 고객의 주요 이탈</code>이 크다.</p>
<img src="https://1drv.ms/i/s!AiIJqnZ0rDMRgeQxwqr3LeQl9fZ6kA?embed=1&width=1308&height=536" width="1308" height="536" alt="매 기준년월 MAU 고객 분류 추이 (2020.01 ~ 2022.07 부분)"/>

<ul>
<li><p>pyspark source code : <a target="_blank" rel="noopener" href="https://github.com/keyhong/pyspark-preprocessing/blob/main/da-analysis-jupyter/snap_monthly_user_movement.ipynb">https://github.com/keyhong/pyspark-preprocessing/blob/main/da-analysis-jupyter/snap_monthly_user_movement.ipynb</a></p>
</li>
<li><p>고객 분류 정의</p>
</li>
</ul>
<table>
<thead>
<tr>
<th>고객분류명</th>
<th>분류 코드 상세</th>
</tr>
</thead>
<tbody><tr>
<td>신규 고객</td>
<td>이전 구매 이력이 없고, 현재 월에 처음 구매한 고객</td>
</tr>
<tr>
<td>기존 고객</td>
<td>최근 2개월(재구매주기) 이내에 구매 이력이 있으며, 현재 월에 구매한 고객</td>
</tr>
<tr>
<td>복귀 고객</td>
<td>최근 2개월(재구매 주기) 이내에 구매 기록이 없지만, 그 전 2개월 이내에 구매한 이력이 있고, 현재 월에 다시 구매한 고객</td>
</tr>
</tbody></table>
<br>

<ul>
<li>22년 7월에 전체 코호트에서 전월대비 약 20 % 정도의 많은 수의 고객이 이탈하였다.</li>
</ul>
<img src="https://1drv.ms/i/s!AiIJqnZ0rDMRgeQuVgIFE4Bwmbceig?embed=1&width=2080&height=786" width="2080" height="786" alt="신규 고객 구매 리텐션 (2021.08 ~ 2022.07 부분)"/>

<p><br><br></p>
<p>(3) 이는 단순 이탈이 아닌 <code>5개 연도의 시계열 흐름을 역행하는 장기적인 이탈 문제</code>로 향후 지속적인 매출 감소로 이어질 가능성이 크기에 빠르게 복귀 유저로 돌아올 수 있도록 전략 수립이 필요하다.</p>
<img src="https://1drv.ms/i/s!AiIJqnZ0rDMRgeQyuM5Ywy9NF_3dHA?embed=1&width=1152&height=650" width="1152" height="650" alt="매 기준 연도 5~8월 시계열 추이 (2017 ~ 2022 전체)"/>


<ul>
<li><p>왜 6월에 감소하고, 7월에 증가하는 시계열 흐름이 나타날까?</p>
<p>(1) 르바란 (Eid al-Fitr)</p>
<blockquote>
<p>라마단 (이슬람교도들이 한 달 동안 단식, 기도, 명상, 자선 활동을 통해 신앙을 강화하고 자기 성찰을 하는 기간)의 끝을 기념하는 중요한 명절 ⇒ 새로운 시작을 기념하기 위한 상징적인 의미</p>
</blockquote>
<p>(2) 계절적 요인</p>
<blockquote>
<p>인도네시아의 6월은 건기과 우기가 겹치는 시기로 계절 변화에 따라, 7월에 옷을 사입을 가능성이 높다.</p>
</blockquote>
<p>(3) 명절 지출을 위한 경제적 요인</p>
<blockquote>
<p>르바란에 대한 준비로 축제 이전인 6월에는 옷을 사입지 않을 가능성이 높다.</p>
</blockquote>
<p>단, 상관관계가 있다고 해서 인과관계가 있다고 정의 할 수 없으므로 이에 대한 분석은 차후 과제로 남겨두고자 한다.</p>
</li>
</ul>
<h2 id="3-이탈-고객-분석"><a href="#3-이탈-고객-분석" class="headerlink" title="3. 이탈 고객 분석"></a>3. 이탈 고객 분석</h2><hr>
<blockquote>
<p>기존 고객의 리텐션을 분석한 결과, 이탈이 두드러지는 특정 코호트가 발견되지 않았다. 첫 구매 월별 코호트와 상품, 유저 특성 모두 큰 차이가 없었으며, 2022년 7월에도 특별한 변화가 관찰되지 않았다. <br><br> 따라서, 특정 문제 집단 없이 전체적으로 고객 이탈이 발생하고 있다고 판단했다. 이에 따라, 서비스에 영향력이 큰 고객 세그먼트를 선별하고, 그 중 이탈이 발생하는 세그먼트의 구매 특성을 분석하였다. <br><br> 이를 토대로 비즈니스 우선순위를 고려한 액션안을 제안하고자 한다.</p>
</blockquote>
<h3 id="3-1-RFM-분석"><a href="#3-1-RFM-분석" class="headerlink" title="3.1 RFM 분석"></a>3.1 RFM 분석</h3><hr>
<p>(1)  RFM 기준</p>
<ul>
<li><p>Recency 평균 구매 주기 계산</p>
<ul>
<li>pyspark source code : <a target="_blank" rel="noopener" href="https://github.com/keyhong/pyspark-preprocessing/blob/main/da-analysis-jupyter/snap_monthly_user_purchase_frequency_and_monetary.ipynb">https://github.com/keyhong/pyspark-preprocessing/blob/main/da-analysis-jupyter/snap_monthly_user_purchase_frequency_and_monetary.ipynb</a></li>
</ul>
</li>
<li><p>Frequancy, Moneytary 사분위수 계산</p>
<ul>
<li>pyspark source code : <a target="_blank" rel="noopener" href="https://github.com/keyhong/pyspark-preprocessing/blob/main/da-analysis-jupyter/snap_monthly_user_purchase_frequency_and_monetary.ipynb">https://github.com/keyhong/pyspark-preprocessing/blob/main/da-analysis-jupyter/snap_monthly_user_purchase_frequency_and_monetary.ipynb</a></li>
</ul>
</li>
<li><p>RFM 기준 요약표</p>
</li>
</ul>
<img src="https://1drv.ms/i/c/1133ac7476aa0922/IQQV-_41BnslSZd0ZTWFfopBARyZfJ-nP5fONRNfxs-I8Lc?width=1024" width="1024" height="auto" alt="RFM 기준 요약표"/>

<ul>
<li>사분위수 계산</li>
</ul>
<img src="https://1drv.ms/i/c/1133ac7476aa0922/IQTz1wcaBgxhQ7Nik3EHAIZpAVpxiuHiDiYJcM5aoY1DVFE?width=1024" width="1024" height="auto" alt="구매빈도, 구매금액 사분위수 계산"/>

<ul>
<li>(1) 1~3분위 지점의 값을 구해 이를 FM 구간 구분 기준으로 설정</li>
<li>(2) 전체 유저의 구매 빈도, 금액에 순위를 메겼을 때, 각 <code>1분위(25 %)</code>, <code>2분위(50 %)</code>, <code>3분위(75 %)</code>에 해당하는 값 혹은 가장 가까운 근사치를 확인</li>
<li>(3) 고려사항 : 조회 기간을 4~6월(3개월)로 확인해 F, M 분위별 값의 편차가 크지 않음을 확인</li>
</ul>
<p>(2) 분석 세그먼트 선정</p>
<ul>
<li><p>선정 기준</p>
<ul>
<li><p>(1) 매출, 고객 비중</p>
</li>
<li><p>(2) 세그먼트의 월별 변화 확인 시 전월대비 7월 고객 및 매출 증감률이 감소세에 접어든 세그먼트</p>
</li>
</ul>
<img src="https://1drv.ms/i/c/1133ac7476aa0922/IQS5HKolxGibSIQ1fApaHQ7KAa8nJ4CfngB-jLL-aRDdOfY?width=1024" width="1024" height="auto" />
</li>
<li><p>선정 군집</p>
<ul>
<li><p>(1) VIP 고객 (<code>Y-F1-M1</code> | <code>Y-F2-M1</code> | <code>Y-F2-M2</code>)</p>
<blockquote>
<p>매출, 고객 비중이 가장 높은 상위 3개 세그먼트</p>
</blockquote>
</li>
<li><p>(2) 이탈 우려 고객 (<code>Y-F3-M2</code> | <code>Y-F3-M3</code>)</p>
<blockquote>
<p>영향력이 큰 VIP 고객군 다음으로 고객 비중이 높고, 6월 부터 고객수와 매출 감소세가 뚜렷하게 나타나는 2개 세그먼트</p>
</blockquote>
<table>
  <tr>
    <th>군집</th>
    <th>세그먼트 1</th>
    <th>세그먼트 2</th>
    <th>세그먼트 3</th>
    <th>매출 비중</th>
    <th>고객 수 비중</th>
    <th>비즈니스 영향력</th>
  </tr>
  <tr>
    <td style="text-align: center;">VIP 고객</td>
    <td style="text-align: center;">Y-F1-M1</td>
    <td style="text-align: center;">Y-F2-M1</td>
    <td style="text-align: center;">Y-F2-M2</td>
    <td style="text-align: center;">86 %</td>
    <td style="text-align: center;">59 %</td>
    <td style="text-align: center;">매출 중심</td>
  </tr>
  <tr>
    <td style="text-align: center;">이탈 우려 고객</td>
    <td style="text-align: center;">-</td>
    <td style="text-align: center;">Y-F3-M2</td>
    <td style="text-align: center;">Y-F3-M3</td>
    <td style="text-align: center;">8 %</td>
    <td style="text-align: center;">24 %</td>
    <td style="text-align: center;">고객 수 중심</td>
  </tr>      
</table></li>
</ul>
</li>
</ul>
<p>(3) 군집별 특성 파악 및 비즈니스 미션 설정</p>
<ul>
<li><p>월별 지표 추이</p>
<img src="https://1drv.ms/i/c/1133ac7476aa0922/IQSlTQfDCE6NRbNLTCtVzKGsAfdPM29wd4e3ki5pbdxnJEk?width=1024" width="1024" height="auto" alt="군집별 월별 지표 추이"/>

<p><em><strong>비즈니스 임팩트 : 고객수 대비 매출 비중을 비교해 해당 비교군이 미치는 영향을 파악한 것. 세그먼트별 비교 시 중요도를 확인하는 지표로 활용 가능</strong></em></p>
</li>
<li><p>특성 및 비즈니스 미션</p>
<table>
  <tr>
    <th>군집</th>
    <th>고객 특성</th>
    <th>우선 순위</th>
    <th>문제 해결목적</th>
  </tr>
  <tr>
    <td style="text-align: center;">VIP 고객</td>
    <td style="text-align: left;">서비스에 자주 와서 높은 금액대 상품 소비가 많은 고객</td>
    <td style="text-align: center;">높음(단기적)</td>
    <td style="text-align: center;">매출 감소 방어</td>
  </tr>
  <tr>
    <td style="text-align: center;">이탈 우려 고객</td>
    <td style="text-align: left;">재구매 경험이 있어 브랜드에 대한 인지가 있으며,<br>평균 주문당 금액이 VIP군과 비슷해 장기적 관점에서 필요한 고객</td>
    <td style="text-align: center;">낮음(장기적)</td>
    <td style="text-align: center;">고객 관리 및 브랜딩 차원</td>
  </tr>
</table></li>
</ul>
<h3 id="3-2-이탈군집-상세-로그-분석"><a href="#3-2-이탈군집-상세-로그-분석" class="headerlink" title="3.2 이탈군집 상세 로그 분석"></a>3.2 이탈군집 상세 로그 분석</h3><hr>
<p>(1) 로그 분석 선정 이유</p>
<ul>
<li>경과  : 특정 군집에서 이탈이 발생하나 상품, 고객의 인구통계 차원으로 확인 시 유의미한 변화가 관찰되지 않았다.</li>
</ul>
<p>(2) 로그 분석 목적 및 가설 설정</p>
<ul>
<li><p>목적 : 이탈자의 이벤트 행동 패턴 이해 및 군집별, 월별 비교를 통해 문제점, 활용안 도출</p>
</li>
<li><p>가설 : 탐색 이벤트량에 대한 변화가 보인다면 서비스 리텐션, 이탈에 대한 변동이 있을 것이다.</p>
<ul>
<li><p>확인 정보 : 주요 세그먼트별로 이벤트간의 어떤 변화가 있었는지 확인</p>
</li>
<li><p>분석 대상 : 특정 세그먼트의 6월 이탈, 7월 이탈 유저</p>
</li>
</ul>
</li>
</ul>
<p>(3) 세부 기준 및 분석 방식 소개</p>
<ul>
<li><p>그룹화 및 별칭 설정</p>
<ul>
<li><p>세그먼트의 방문 빈도를 고려하여 3개 그룹으로 나누어 세부적인 원인 분석을 수행</p>
<table>
  <tr>
    <th>군집</th>
    <th>해당 세그먼트</th>
  </tr>
  <tr>
    <td style="text-align: center;">VIP 고객 1</td>
    <td style="text-align: center;">Y-F1-M1</td>
  </tr>
  <tr>
    <td style="text-align: center;">VIP 고객 2</td>
    <td style="text-align: center;">Y-F2-M1, Y-F2-M2</td>
  </tr>
  <tr>
    <td style="text-align: center;">이탈 우려 고객</td>
    <td style="text-align: center;">Y-F3-M2, Y-F3-M3</td>
  </tr>
</table></li>
</ul>
</li>
<li><p>분석 구조 및 비교 범주</p>
<ul>
<li><p>코호트-세그먼트 군집별 비교를 통한 중요고객 확인, 문제점 도출</p>
</li>
<li><p>동일 군집의 구매월별 비교</p>
</li>
<li><p>군집&#x2F;구매 월별 흐름을 파악</p>
</li>
</ul>
<img src="https://1drv.ms/i/c/1133ac7476aa0922/IQTUVVF2ZWaZQYsVs2BnP0JVAUUVxn5CFCdtnt3HDYLts10?width=660" width="660" height="auto" /></li>
</ul>
<h2 id="4-시니어-평가-내용-및-회고"><a href="#4-시니어-평가-내용-및-회고" class="headerlink" title="4. 시니어 평가 내용 및 회고"></a>4. 시니어 평가 내용 및 회고</h2><hr>
<h3 id="4-1-Feedback-Summary"><a href="#4-1-Feedback-Summary" class="headerlink" title="4.1 Feedback Summary"></a>4.1 Feedback Summary</h3><hr>
<p>이탈 고객 문제를 RFM 분석을 통해 접근했으나, DA 시니어분들께 발표한 결과 RFM 분석이 매출 분석에 적합하지 않다는 피드백을 받았다. 이에 따라 차후 매출 감소 요인을 파악하기 위해 퍼널 분석을 재수행하고 추가적인 분석을 진행할 예정이다.</p>
<img src="https://1drv.ms/i/c/1133ac7476aa0922/IQTZVFeGJijRQoi6MuMWOOsHATDZMy2nicrdkPb-mbaFWUo?width=1024" width="1024" height="auto" alt="feedback"/>

<h3 id="4-2-Lesson"><a href="#4-2-Lesson" class="headerlink" title="4.2 Lesson"></a>4.2 Lesson</h3><hr>
<p>이번 프로젝트를 통해 분석가의 시각을 더 깊이 이해하게 되었습니다. 환경을 구축하고 모델을 설계하는 과정에서 함께한 두 명의 주니어와 협업하며 여러 어려움을 겪었습니다. 데이터 볼륨이 커서 각자의 하드웨어 사양이 부족한 탓에 데이터 적재와 쿼리 결과를 받는 속도가 느려, 분석 작업이 원활하지 않았습니다. 또한, 개인별로 쿼리 작성 방식이 달라 피드백을 주고 정확성을 검증하는 과정도 쉽지 않았습니다. 특히, 데이터 모델을 설계하는 사람의 세분성 설계가 분석가의 작업 효율성에 미치는 영향을 직접 체감하며, 테이블의 세분성 설계가 분석가의 역량을 크게 좌우하는 중요한 요소임을 깨달았습니다. 비록 작은 규모의 데이터였지만, 실제 업무에서도 충분히 발생할 수 있는 상황이라고 생각합니다.</p>
<br>

<p>초기 단계로 돌아가 다시 분석을 수행한다면, 어떤 분석을 할 수 있을지, 어떤 지표를 생성해야 할지, 그 지표를 사용함으로써 얻는 이점은 무엇인지, 그리고 지표의 정확한 정의가 무엇인지에 대해 깊이 고민할 것입니다. 또한, 데이터 프로파일링을 통해 품질 문제로 인해 제한된 분석 방법을 사전에 파악할 것입니다. 문제 원인 분석 방법론에 대한 피드백을 받으며, 적합하지 않은 접근 방식을 시도함으로써 어떤 방법이 효과적이지 않은지를 깨닫고, 이를 통해 다른 접근 방식으로 해결할 수 있는 유익한 피드백을 많이 얻었습니다.</p>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        Author:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">Keyhong</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        Link:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="http://example.com/2024/08/22/Side-Project/fashion-analysis-project/">http://example.com/2024/08/22/Side-Project/fashion-analysis-project/</a>
                </span>
            </div>
            <!-- <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        reprint:
                    </i>
                </span>
                <span class="reprint-info">
                    use
                    <a href="cc_by_url" rel="external nofollow noreferrer" target="_blank">cc_by_name</a>
                    licensed
                    <a href="/about" target="_blank">Keyhong</a>
                    !
                </span>
            </div> -->
        
    </div>

    <!-- <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>Copied successfully, please follow the reprint policy of this article</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">more</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script> -->



            <div class="tag_share" style="display: block;">
                <!-- <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            <span class="chip bg-color">No tag</span>
                        </div>
                    
                </div> -->
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    

    

</div>

                </div>
            </div>
            
                <div id="reward">
    <!-- <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a> -->

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    


    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;Previous</div>
            <div class="card">
                <a href="/2024/08/28/Life/seven_questions/">
                    <div class="card-image">
                        
                        <img src="/images/logos/book-logo.png" class="responsive-img" alt="시니어 DA에게 묻는 7문 7답">
                        
                        <span class="card-title diy-neon-red">시니어 DA에게 묻는 7문 7답</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2024-08-28
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/Life/" class="post-category">
                                    Life
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                Next&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2024/08/16/Data-Governance/posting/data-ownership/">
                    <div class="card-image">
                        
                        <img src="/images/logos/data-architecture-logo.png" class="responsive-img" alt="데이터 품질관리 (오너십)">
                        
                        <span class="card-title diy-neon-red">데이터 품질관리 (오너십)</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2024-08-16
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%EB%8D%B0%EC%9D%B4%ED%84%B0-%EA%B1%B0%EB%B2%84%EB%84%8C%EC%8A%A4/" class="post-category">
                                    데이터 거버넌스
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>


  <!-- 是否加载使用自带的 prismjs. -->
  <script type="text/javascript" src="/libs/prism/prism.min.js"></script>


<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>



    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;목차</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>


<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    

    <div class="container row center-align"
         style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2024</span>
            
            <a href="/about" target="_blank">Gyuwon Hong</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            
            <br>
            
            
            
            
            
            <br>

            <!-- 运行天数提醒. -->
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link ">
    <a href="https://github.com/keyhong" class="tooltipped" target="_blank" data-tooltip="GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:wnhong96@gmail.com" class="tooltipped" target="_blank" data-tooltip="Email" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>













</div>
    </div>
</footer>

<div class="progress-bar"></div>


    
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;Search</span>
            <input type="search" id="searchInput" name="s" placeholder="Please enter a search keyword"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- Back to Top Button -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    

    
    
    

    <!-- 雪花特效 -->
    

    <!-- 鼠标星星特效 -->
    

    

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    

    

    

    <!--腾讯兔小巢-->
    
    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
