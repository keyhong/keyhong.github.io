<!DOCTYPE HTML>
<html lang="en">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="Components, Data Engineering,Data Analysis,Python Backend">
    <meta name="description" content="Mater &amp;amp; Cluster Manager
실행되는 분산 클러스터 리소스(YARN이나 Mesos의 경우, 컨테이너)를 모니터링하고 예약하고 할당하는 중앙 프로세스

Master와 Cluster Manager는">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>Components | Keyhong</title>
    <link rel="icon" type="image/png" href="/favicon.png">
    


    <!-- bg-cover style     -->



<link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.min.css">
<link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
<link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
<link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
<link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
<link rel="stylesheet" type="text/css" href="/css/matery.css">
<link rel="stylesheet" type="text/css" href="/css/my.css">
<link rel="stylesheet" type="text/css" href="/css/dark.css" media="none" onload="if(media!='all')media='all'">




    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
    <link rel="stylesheet" href="/css/post.css">




    
        <link rel="stylesheet" type="text/css" href="/css/reward.css">
    



    <script src="/libs/jquery/jquery-3.6.0.min.js"></script>

<meta name="generator" content="Hexo 7.0.0"></head>


<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span diy-happy-monkey">Keyhong</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>Index</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>Categories</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>About</span>
    </a>
    
  </li>
  
  <!-- <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="Search" style="zoom: 0.85;"></i>
    </a>
  </li> -->
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">Keyhong</div>
        <div class="logo-desc">
            
            Never really desperate, only the lost of the soul.
            
        </div>
    </div>

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			Index
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			Categories
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			About
		</a>
          
        </li>
        
        
    </ul>
</div>


        </div>

        
    </nav>

</header>

    

<div class="bg-cover pd-header post-cover" style="background-image: url('/images/logos/spark-logo.png')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title diy-neon-red">
                        Components</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                        <div class="article-tag">
                            <i class="far fa-calendar-minus fa-fw"></i>Publish Date:&nbsp;&nbsp;
                                <span class="chip bg-color">
                                    2023-12-01</span>
                        </div>
                    
                    


                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/Spark/" class="post-category">
                                Spark
                            </a>
                        
                    </div>
                    
                </div>
            </div>
        </div>
        <hr class="clearfix">

        
        <!-- 是否加载使用自带的 prismjs. -->
        <link rel="stylesheet" href="/libs/prism/prism.min.css">
        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <h2 id="Mater-Cluster-Manager"><a href="#Mater-Cluster-Manager" class="headerlink" title="Mater &amp; Cluster Manager"></a>Mater &amp; Cluster Manager</h2><blockquote>
<p>실행되는 분산 클러스터 리소스(YARN이나 Mesos의 경우, 컨테이너)를 모니터링하고 예약하고 할당하는 중앙 프로세스</p>
</blockquote>
<p>Master와 Cluster Manager는 독립된 프로세스로 서로 분리될 수도 있고, 독립실행형 모드에서 스파크를 실행할 때처럼 하나의 프로세스로 결합될 수도 있습니다.</p>
<h2 id="Spark-Master"><a href="#Spark-Master" class="headerlink" title="Spark Master"></a>Spark Master</h2><blockquote>
<p>클러스터의 리소스를 요청하고 이를 Spark Driver에서 사용할 수 있게 만드는 프로세스</p>
</blockquote>
<ul>
<li><p>모든 배포 모드에서 Master는 Worker Node에 리소스나 컨테이너를 할당하고, 그 상태를 추적하고 진행 상황을 모니터링합니다.</p>
</li>
<li><p>스파크 독립실행형 모드로 실행하면, Master 프로세스는 Master Host의 8080 포트에서 웹 UI를 제공합니다.</p>
</li>
</ul>
<h4 id="Spark-Master-vs-Spark-Driver"><a href="#Spark-Master-vs-Spark-Driver" class="headerlink" title="Spark Master vs. Spark Driver"></a>Spark Master vs. Spark Driver</h4><p>Driver와 Master의 런타임 함수를 구별하는 것은 중요합니다. Master 프로세스는 응용 프로그램의 실행을 통제하는 하는 것이 아닌, 단순히 리소스를 요청해서 Driver가 사용하게 하는 것입니다. Master는 리소스의 위치와 상태를 모니터링 하지만, 응용 프로그램의 실행 및 해당 작업과 단계의 조정에 관여하지 않는다. 이는 Driver 프로세스의 역할입니다.</p>
<h2 id="Cluster-Manager"><a href="#Cluster-Manager" class="headerlink" title="Cluster Manager"></a>Cluster Manager</h2><blockquote>
<p>Worker Node를 모니터링하고, Master가 요청하면 리소스를 예약하는 프로세스</p>
</blockquote>
<ul>
<li><p>Master는 클러스터가 예약한 리소스를 Executor의 형태로 제공합니다.</p>
</li>
<li><p>Mesos나 YARN에서 스파크를 실행할 때, Cluster Manager는 Master 프로세스와 분리된다. 독립 실행형(Standalone) 모드일 때는 Master 프로세스가 Cluster Manager 역할도 함께 수행한다.</p>
</li>
<li><p>클러스터 매니저 함수는 하둡 클러스터에서 실행되는 스파크 응용 프로그램용 YARN 리소스 매니저(RM) 프로세스로 적합합니다. RM은 YARN Node Manager에서 실행되는 컨테이너의 상태를 예약, 할당 및 모니터링합니다. 스파크 응용 프로그램은 Cluster Mode에서 실행 중인 응용 프로그램의 Master 프로세스(Application Master)처럼 이 컨테이너를 사용해 Executor 프로세스를 호스트합니다.</p>
</li>
</ul>
<h2 id="Spark-Worker"><a href="#Spark-Worker" class="headerlink" title="Spark Worker"></a>Spark Worker</h2><h2 id="Spark-Executor"><a href="#Spark-Executor" class="headerlink" title="Spark Executor"></a>Spark Executor</h2><blockquote>
<p>Spark Executor는 스파크 DAG 작업이 실행되는 프로세스<br> <br>Executor는 스파크 클러스터에 Worker Node의 CPU 및 메모리 리소스를 예약합니다. 해당 리소스는 스파크 응용 프로그램 전용이며, 응용 프로그램이 완료시 종료됩니다.<br> <br>스파크 프로그램은 많은 Executor로 구성되며 병렬로 작업합니다.<br> <br>일반적으로 Executor 프로세스를 호스팅하는 Worker Node에 유한하거나 고정된 수의 Executor가 특정 시점에 할당됩니다. 따라서 노드의 수를 알고 있는 클러스터에는 주어진 시간에 실행할 수 있는 Executor의 수가 한정됩니다..<br> <br>응용 프로그램이 클러스터의 실제 용량을 초과해 Executor를 요구하면, 다른 Executor가 완료하고 릴리즈하는 것으로 시작되도록 예약합니다. <br> <br>스파크 Executor를 호스팅하는 JVM에는 객체를 저장하고 관리하는 전용 메모리 공간인 Heap이 할당됩니다. Executor의 JVM 힙에 커밋된 메모리 양은 다음 두 가지로 설정 가능합니다.</p>
</blockquote>
<ul>
<li><p>SparkSession을 생성할 때 config로 <code>spark.executor.memory</code> 설정</p>
</li>
<li><p>spakr-shell 또는 spark-submit 실행 명령 CLI에서 <code>--executor-memory</code> 아규먼트를 설정</p>
</li>
</ul>
<p> <br>Executor는 작업의 출력 데이터를 메모리 또는 디스크에 저장합니다. Worker와 Executor는 할당된 작업만 인식하지만, Driver는 응용 프로그램을 구성하는 전체 작업과 관련된 종속성을 파악<br> <br>드라이버 프로세스에서 생성된 스파크 응용 프로그램 UI의 [Executors] 탭에서 응용 프로그램의 Executor를 검사 가능합니다.<br>스파크 독립실행형 클러스터(Standalone Mode)에서는 작업자 노드는 8081 포트부터 사용자 인터페이스를 노출합니다.</p>
<h2 id="Spark-Driver"><a href="#Spark-Driver" class="headerlink" title="Spark Driver"></a>Spark Driver</h2><blockquote>
<p><strong>클라이언트가 스파크에서 응용 프로그램을 제출하는 데 사용하는 프로세스</strong></p>
</blockquote>
<ul>
<li><p><strong>스파크의 응용 프로그램의 수명은 스파크 드라이버로 시작하고 끝난다.</strong></p>
</li>
<li><p>스파크 드라이버는 클러스터에 있는 클라이언트나 노드에 물리적으로 상주할 수 있다.</p>
</li>
</ul>
<h3 id="Spark-Driver의-역할"><a href="#Spark-Driver의-역할" class="headerlink" title="Spark Driver의 역할"></a>Spark Driver의 역할</h3><h4 id="☆-스파크-세션-SparkSession-생성"><a href="#☆-스파크-세션-SparkSession-생성" class="headerlink" title="☆ 스파크 세션(SparkSession) 생성"></a>☆ 스파크 세션(SparkSession) 생성</h4><p>스파크 드라이버는 스파크세션(SparkSession)을 생성한다. SparkSession 객체는 스파크 클러스터에 대한 연결을 나타냅니다.</p>
<ol>
<li>대화식 셸(spark-shell, REPL)과 스파크 응용 프로그램의 시작 부분에서 인스턴스가 생성되고, 프로그램 전체에 사용된다.</li>
<li>Spark 2.0 이전에는 스파크 핵심 응용 프로그램에 사용된 SparkContext, SQLContext, HiveContext, StreamingContext가 스파크 응용 프로그램의 엔트리 포인트에 포함되어 있었지만, <strong>2.0부터는 SparkSession 객체가 모든 객체를 단일 엔트리 포인트로 결합</strong>해 모든 스파크 응용 프로그램에 사용 할 수 있다.</li>
</ol>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token triple-quoted-string string">""" 비대화식 응용 프로그램에서 SparkSession 인스턴스 생성하기 """</span>
<span class="token keyword">from</span> pyspark<span class="token punctuation">.</span>sql <span class="token keyword">import</span> SparkSession

<span class="token comment"># SparkSession 클래스의 내부는 디자인패턴 중 빌더 패턴이 적용 되었다.</span>
spark <span class="token operator">=</span> SparkSession<span class="token punctuation">.</span>builder \
    <span class="token punctuation">.</span>master<span class="token punctuation">(</span><span class="token string">"spark://sparkmaster:7077"</span><span class="token punctuation">)</span> \ <span class="token comment"># master 설정</span>
    <span class="token punctuation">.</span>appName<span class="token punctuation">(</span><span class="token string">"My Spark Application"</span><span class="token punctuation">)</span> \ <span class="token comment"># appName 설정</span>
    <span class="token punctuation">.</span>config<span class="token punctuation">(</span><span class="token string">"spark.submit.deployMode"</span><span class="token punctuation">,</span> <span class="token string">"client"</span><span class="token punctuation">)</span> \ <span class="token comment"># driver, executor config 설정</span>
    <span class="token punctuation">.</span>getOrCreate<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ol start="3">
<li><p><strong>SparkSession 객체는 자식 객체인 SparkContext, SparkConf을 통해 Master, appName, Executors 등 사용자가 설정한 모든 런타임 구성 속성을 포함</strong>한다.</p>
</li>
<li><p>SparkSession 인스턴스의 객체 이름은 임의로 지정된다. 기본적으로 스파크 대화형 셸에서 SparkSession 인스턴스는 spark라는 이름으로 초기화 된다. <strong>spark-submit을 사용해 제출하는 비대화식 스파크 응용 프로그램에서는 개발자가 변수명을 마음대로 변경 할 수 있지만, 일반적으로 spark라는 변수명을 그대로 활용한다.</strong></p>
</li>
</ol>
<p> <img src="https://onedrive.live.com/embed?resid=1133AC7476AA0922%2110154&authkey=%21AHL6Zgzu2Wo_IXo&width=1035&height=351" width="1035" height="351" alt="Spark Shell에서 Configuration 확인"/></p>
<h4 id="스파크-응용-프로그램의-실행을-계획하고-조정"><a href="#스파크-응용-프로그램의-실행을-계획하고-조정" class="headerlink" title="스파크 응용 프로그램의 실행을 계획하고 조정"></a>스파크 응용 프로그램의 실행을 계획하고 조정</h4><p>드라이버는 응용 프로그램 프로세싱 입력에 따라 프로그램을 어떻게 실행할지 계획한다.<br> <br>1. 요청된 모든 transformation 및 action에 따라 DAG를 작성한다. 그래프의 각 노드는 변형 또는 계산 단계를 나타낸다.</p>
<ul>
<li>transformation</li>
</ul>
<p> </p>
<blockquote>
<p>데이터 조작 작업. shuffling 여부에 따라 narrow transformation과 wide transformation으로 나뉜다.</p>
</blockquote>
<p>- action </p>
<blockquote>
<p>출력 또는 프롬프트에 대한 프로그램 실행 요청</p>
</blockquote>
<p>** DAG (Directly Acyclic Graph)</p>
<ul>
<li><p><strong>방향성이 있는 비순환 그래프</strong>는 데이터 흐름(data flow)와 그 종속성을 나타내기 위해 컴퓨터 과학에서 일반적으로 사용되는 수학적 구조이다. 정점(Vertex 또는 Node), 엣지(Edge)로 구성되며, 순환참조를 가질 수 없는 방식으로 노드를 연결하기 때문에 **불변성(Immutability)**를 가진다.</p>
</li>
<li><p>DAG는 테즈(Tez), 드릴(Drill), 프레스토(Presto)와 같은 다른 빅데이터 에코 시스템에도 스케줄링을 위해 사용된다.</p>
</li>
</ul>
<ol start="2">
<li>스파크 응용 프로그램은 DAG 작업(task)과 단계(stage)로 구성된다.</li>
</ol>
<ul>
<li>task</li>
</ul>
<p> </p>
<blockquote>
<p>스파크 프로그램에서 스케줄링이 가능한 <strong>일의 최소 단위</strong></p>
</blockquote>
<ul>
<li>stage</li>
</ul>
<p> </p>
<blockquote>
<p>함께 실행 할 수 있는 <strong>일련의 작업 모음</strong>이다. <strong>stage는 단계 종속성(stage dependencies)이 있다. shuffle을 하기 전까지 모든 executor들은 똑같이 처리가 완료된 상태이어야 한다.</strong> 따라서 stage는 shuffle이 발생하는 구간과 구간 사이의 일련의 task 모음이다.</p>
</blockquote>
<h4 id="응용프로그램-조직화-Orchestration"><a href="#응용프로그램-조직화-Orchestration" class="headerlink" title="응용프로그램 조직화 (Orchestration)"></a>응용프로그램 조직화 (Orchestration)</h4><p>드라이버는 DAG에 정의된 stage와 task의 실행을 설계한다. 스케줄링 및 작업 실행과 관련된 드라이버의 주요 활동은 아래와 같다.</p>
<p>1. 실행에 사용할 수 있는 리소스 추적<br> <br>2. 가능한 데이터에 ‘close’를 실행하는 작업 스케줄링 (데이터 지역성 : shuffle로 발생하는 Network I&#x2F;O 비용을 줄이기 위해 데이터를 가져와 작업을 처리하는 것이 아닌, 데이터가 위치한 노드로 가서 작업을 하는 방식) </p>
<h4 id="☆-상태-및-실행-결과를-클라이언트에게-반환"><a href="#☆-상태-및-실행-결과를-클라이언트에게-반환" class="headerlink" title="☆ 상태 및 실행 결과를 클라이언트에게 반환"></a>☆ 상태 및 실행 결과를 클라이언트에게 반환</h4><p>1. 스파크 드라이버는 응용 프로그램의 결과를 반환하는 책임을 가진다. 데이터를 클라이언트에 반환하도록 요청되는 액션의 경우 반환값은 리턴 코드 또는 데이터가 될 수 있다.<br> <br>2. 스파크 드라이버는 응용 프로그램 UI도 제공한다. 기본 포트 40404으로 UI가 자동 생성되며, 후속 응용 프로그램이 동일한 호스트에 실행되면, 4040 포트에서 연속적인 포트(4041, 4042..)가 사용된다.</p>
<img src="https://onedrive.live.com/embed?resid=1133AC7476AA0922%2110153&authkey=%21AJpl3jPKEUJ7NDY&width=1034&height=445" width="1034" height="445" alt="스파크 응용 프로그램 Web UI"/>

<h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><ul>
<li>『Data Analytics with Spark Using Python』 - Jeffrey Aven</li>
</ul>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        Author:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">Keyhong</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        Link:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="http://example.com/2023/12/01/Spark/components/">http://example.com/2023/12/01/Spark/components/</a>
                </span>
            </div>
            <!-- <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        reprint:
                    </i>
                </span>
                <span class="reprint-info">
                    use
                    <a href="cc_by_url" rel="external nofollow noreferrer" target="_blank">cc_by_name</a>
                    licensed
                    <a href="/about" target="_blank">Keyhong</a>
                    !
                </span>
            </div> -->
        
    </div>

    <!-- <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>Copied successfully, please follow the reprint policy of this article</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">more</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script> -->



            <div class="tag_share" style="display: block;">
                <!-- <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            <span class="chip bg-color">No tag</span>
                        </div>
                    
                </div> -->
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    

    

</div>

                </div>
            </div>
            
                <div id="reward">
    <!-- <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a> -->

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    


    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;Previous</div>
            <div class="card">
                <a href="/2023/12/01/Spark/catalyst-optimizer/">
                    <div class="card-image">
                        
                        <img src="/images/logos/spark-logo.png" class="responsive-img" alt="Catalyst Optimizer">
                        
                        <span class="card-title diy-neon-red">Catalyst Optimizer</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2023-12-01
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/Spark/" class="post-category">
                                    Spark
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                Next&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2023/12/01/Spark/compression/">
                    <div class="card-image">
                        
                        <img src="/images/logos/spark-logo.png" class="responsive-img" alt="Compression">
                        
                        <span class="card-title diy-neon-red">Compression</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2023-12-01
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/Spark/" class="post-category">
                                    Spark
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>


  <!-- 是否加载使用自带的 prismjs. -->
  <script type="text/javascript" src="/libs/prism/prism.min.js"></script>


<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>



    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;목차</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    

    <div class="container row center-align"
         style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2024</span>
            
            <a href="/about" target="_blank">Gyuwon Hong</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            
            <br>
            
            
            
            
            
            <br>

            <!-- 运行天数提醒. -->
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link ">
    <a href="https://github.com/keyhong" class="tooltipped" target="_blank" data-tooltip="GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:wnhong96@gmail.com" class="tooltipped" target="_blank" data-tooltip="Email" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>













</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;Search</span>
            <input type="search" id="searchInput" name="s" placeholder="Please enter a search keyword"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- Back to Top Button -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    

    
    
    

    <!-- 雪花特效 -->
    

    <!-- 鼠标星星特效 -->
    

    

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    

    

    

    <!--腾讯兔小巢-->
    
    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
